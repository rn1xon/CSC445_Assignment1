<!DOCTYPE html>
<html>
<head>
    <title>CSC445 Network Performance</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 40px; background: #f4f4f9; }
        .section { background: white; padding: 20px; border-radius: 8px; margin-bottom: 40px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .chart-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: 350px;}
        h2 { border-bottom: 2px solid #3498db; padding-bottom: 10px; color: #2c3e50; }
    </style>
</head>
<body>
    <h1>Network Performance Report: 3 Connection Pairs</h1>

    <div class="section">
        <h2>Pair 1: PC to CS Server (Residence Wifi Ethernet ↔ Moxie)</h2>
        <div class="chart-grid">
            <canvas id="rtt1"></canvas>
            <canvas id="tp1"></canvas>
        </div>
    </div>

    <div class="section">
        <h2>Pair 2: Laptop to CS Server (Oswego Secure Wireless ↔ Moxie)</h2>
        <div class="chart-grid">
            <canvas id="rtt2"></canvas>
            <canvas id="tp2"></canvas>
        </div>
    </div>

    <div class="section">
        <h2>Pair 3: Internal CS Network (Altair ↔ Moxie)</h2>
        <div class="chart-grid">
            <canvas id="rtt3"></canvas>
            <canvas id="tp3"></canvas>
        </div>
    </div>

    <script>
        function makeCharts(pairId, rttDataTCP, rttDataUDP, tpDataTCP, tpDataUDP) {

    // RTT LINE CHART
    new Chart(document.getElementById('rtt' + pairId), {
        type: 'line',
        data: {
            labels: [8, 64, 256, 512],
            datasets: [
                { label: 'TCP RTT (ms)', data: rttDataTCP, borderColor: 'blue', pointBackgroundColor: 'blue' },
                { label: 'UDP RTT (ms)', data: rttDataUDP, borderColor: 'red', pointBackgroundColor: 'red' }
            ]
        },
        options: {
            plugins: {
                datalabels: {
                    anchor: 'end',
                    align: 'top',
                    color: '#000',
                    font: { weight: 'bold', size: 12 },
                    formatter: v => v.toFixed(2)
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Message Size (bytes)',
                        font: { weight: 'bold', size: 14 }
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'RTT (ms)',
                        font: { weight: 'bold', size: 14 }
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });

    // THROUGHPUT BAR CHART
    new Chart(document.getElementById('tp' + pairId), {
        type: 'bar',
        data: {
            labels: [1024, 512, 256],
            datasets: [
                { label: 'TCP Mbps', data: tpDataTCP, backgroundColor: 'rgba(0, 0, 255, 0.5)' },
                { label: 'UDP Mbps', data: tpDataUDP, backgroundColor: 'rgba(255, 0, 0, 0.5)' }
            ]
        },
        options: {
            plugins: {
                datalabels: {
                    anchor: 'center',
                    align: 'center',
                    color: '#000',
                    font: { weight: 'bold', size: 13 },
                    formatter: v => v.toFixed(2)
                }
            },
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Message Size (bytes)',
                        font: { weight: 'bold', size: 14 }
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Throughput (Mbps)',
                        font: { weight: 'bold', size: 14 }
                    }
                }
            }
        },
        plugins: [ChartDataLabels]
    });
}


        // DATA
        makeCharts(1,
            [1.2525666666666666, 1.1297766666666662, 1.1189166666666668, 1.2453766666666666],  // TCP RTT
            [1.34402, 1.5217933333333336, 1.1411233333333335, 1.2530666666666666],             // UDP RTT
            [7.57210970866346, 4.337699425191499, 2.232554776002741],       // TCP Throughput
            [7.791712401716364, 4.71666266903993, 2.6725702731630476]       // UDP Throughput
        );

        makeCharts(2,
            [5.6161467, 4.770973333333332, 4.7214800666666665, 5.011473333333333],
            [5.803393333333334, 4.68545, 4.7771, 4.974456666666666,],
            [1.5800612358468127, 0.780605607384655, 0.41078367899543883],
            [1.669983183721245, 0.8263083294527425, 0.4312324380773758,]
        );

        makeCharts(3,
            [0.8993138333333335, 0.7244334666666667, 0.7045728666666666, 0.7864233333333334,],
            [0.5930937999999999, 0.47126753333333327, 0.48771190000000003, 0.5027419333333333,],
            [14.20044759117041, 7.294698263756445, 3.702863984156625,],
            [20.42716111042314, 13.365203559687734, 7.553930924232136,]
        );
    </script>
</body>
</html>
